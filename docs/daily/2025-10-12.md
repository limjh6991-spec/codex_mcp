# 2025-10-12 일일 로그

## 요약
- Stable-Baselines3 PPO 학습 스크립트에 `--device {auto,cpu,cuda}` 및 `--policy-output`/`--load-policy` 플래그를 도입하여 PyTorch 연산 디바이스 선택과 장기 학습 재개 시나리오를 지원.
- Isaac 전용 Python 3.11 환경에서 CUDA 12.8 대응 PyTorch 나이틀리(2.10.0.dev+cu128) 기반으로 PPO 소크 테스트(`--total_timesteps 16384`, `--device cuda`)를 수행하고 정책 저장(`policies/ppo_roarm_soak.zip`)을 확인.
- 저장된 체크포인트를 로드한 재개 run(`--load-policy policies/ppo_roarm_soak.zip`)을 통해 GPU 학습 재시작 경로를 검증하고, README 및 관련 문서를 최신 상태로 유지.
- `scripts/verify_usd_roarm_m3.py`에 조인트 부착 검사와 CLI 플래그를 추가하고, 실제 USD(`assets/roarm_m3/usd/roarm_m3.generated.usd`)에 대해 계층 덤프/요약을 재검증하는 과정에서 `/World/roarm_m3/root_joint`의 `physics:body0` 누락 이슈를 식별.

## 환경 상태
| 항목 | 값 | 비고 |
| --- | --- | --- |
| Isaac Sim | 5.0 (전용 venv: `~/isaacsim-venv`) | CUDA 12.8 툴킷 + RTX 5090 조합에서 GPU 학습 정상 진행 |
| RL 스크립트 | `training/train_ppo.py` | SB3 2.x + PyTorch 2.10.0.dev20251011+cu128 |
| 하드웨어 | RTX 5090 (SM 120) | 현재 PyTorch wheel 미지원 → CPU fallback 유지 |

## 수행 작업
1. `training/train_ppo.py`
   - `TrainConfig`에 `device` 필드 추가 및 argparse에 `--device` 플래그(+choice) 등록.
   - PPO 초기화 시 `device=cfg.device` 전달하여 Stable-Baselines3가 지정 디바이스를 사용하도록 적용.
2. 문서화
   - README “2025-10-12 업데이트” 섹션과 RL 파이프라인 플래그 설명에 `--device` 옵션 추가.
   - `docs/STATUS.md`의 환경 스냅샷, 진행 상황, 최근 완료 내역을 최신 내용으로 업데이트.
   - `docs/오늘_작업_요약.md`를 2025-10-12 현황 중심으로 재구성하고 2025-10-11 기록은 하단으로 이동.
3. 검증 및 로그
   - Isaac 전용 쉘에서 `~/python.sh training/train_ppo.py --total_timesteps 2 --env-kind isaac --seed 42 --device cpu` 실행.
   - CUDA 12.8 대응 PyTorch 나이틀리 설치 후 `~/python.sh training/train_ppo.py --total_timesteps 2 --env-kind isaac --seed 42 --device cuda` 스모크 테스트 성공(FPS ≈945, `Using cuda device`).
   - 장기 소크(`--total_timesteps 16384 --device cuda --policy-output policies/ppo_roarm_soak`) 및 재개 검증(`--load-policy policies/ppo_roarm_soak.zip --policy-output policies/ppo_roarm_resume`) 수행.
   - `~/python.sh scripts/verify_usd_roarm_m3.py assets/roarm_m3/usd/roarm_m3.generated.usd --hierarchy --max-depth 2 --max-prims 20` 실행으로 아티큘레이션/조인트 요약과 계층 덤프를 복원하고, joint attachment 검증에서 root joint의 `physics:body0` 누락을 경고로 확인.

## 결과
- CUDA 12.8 대응 PyTorch 나이틀리를 통해 RTX 5090 환경에서 Isaac Sim 기반 PPO 학습이 GPU 상에서 안정적으로 수행됨을 확인.
- 장기 학습 후 정책 저장/재개 경로(`--policy-output`, `--load-policy`)가 정상 동작함을 검증하여 향후 soak/regression 시나리오의 신뢰도를 확보.

## 다음 계획
- 나이틀리 의존성 안정화: 정식 릴리스가 sm_120을 지원할 때 버전 고정 전략 수립 및 재검증.
- Isaac Sim 런처 스크립트에 확장 `--disable/--enableOnly` 플래그 실험 재개.
- `/World/roarm_m3/root_joint`의 부착 경로 수정 방안 검토 및 USD 자산/검증 스크립트 업데이트.
