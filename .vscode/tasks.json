{
    "$schema": "vscode://schemas/tasks",
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Install deps",
            "type": "shell",
            "command": "pip install -e .",
            "problemMatcher": []
        },
        {
            "label": "Test",
            "type": "shell",
            "command": "pytest -q",
            "group": "test",
            "problemMatcher": []
        },
        {
            "label": "Train PPO (quick)",
            "type": "shell",
            "command": "python training/train_ppo.py --total_timesteps 2000 --seed 0",
            "problemMatcher": []
        },
        {
            "label": "Check Isaac Import",
            "type": "shell",
            "command": "python scripts/check_isaac_import.py",
            "problemMatcher": []
        },
        {
            "label": "Isaac Precheck",
            "type": "shell",
            "command": "./scripts/isaac_precheck.sh",
            "problemMatcher": [
                {
                    "owner": "isaac-precheck",
                    "pattern": {
                        "regexp": "^\\{.*\\}$",
                        "file": 1,
                        "line": 1,
                        "message": 0
                    }
                }
            ]
        },
        {
            "label": "Env Diagnostic",
            "type": "shell",
            "command": "bash",
            "args": [
                "-lc",
                "scripts/roarm_env_diag.sh"
            ],
            "problemMatcher": [],
            "group": "none"
        },
        {
            "label": "View RoArm (USD)",
            "type": "shell",
            "command": "bash",
            "args": [
                "-lc",
                "if [ -n \"${ISAAC_SIM_ROOT}\" ] && [ -x \"${ISAAC_SIM_ROOT}/python.sh\" ]; then \n  \"${ISAAC_SIM_ROOT}/python.sh\" scripts/view_roarm.py --usd '${input:usdPath}' --steps 300; \nelif [ -n \"${ISAAC_SIM_ROOT}\" ] && [ -f \"${ISAAC_SIM_ROOT}/setup_python_env.sh\" ]; then \n  source \"${ISAAC_SIM_ROOT}/setup_python_env.sh\" && python scripts/view_roarm.py --usd '${input:usdPath}' --steps 300; \nelse \n  echo 'ISAAC_SIM_ROOT not set or python.sh missing. Set ISAAC_SIM_ROOT in .vscode/settings.json or shell.'; exit 1; \nfi"
            ],
            "problemMatcher": [],
            "group": "none"
        },
        {
            "label": "Run MCP Isaac Server",
            "type": "shell",
            "command": "python mcp_servers/isaac_controller_server.py",
            "problemMatcher": []
        }
    ],
    "inputs": [
        {
            "id": "usdPath",
            "type": "promptString",
            "description": "Path to robot USD file",
            "default": "${workspaceFolder}/assets/roarm.usd"
        }
    ]
}