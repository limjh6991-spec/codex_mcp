{
    "$schema": "vscode://schemas/tasks",
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Install deps",
            "type": "shell",
            "command": "pip install -e .",
            "problemMatcher": []
        },
        {
            "label": "Test",
            "type": "shell",
            "command": "pytest -q",
            "group": "test",
            "problemMatcher": []
        },
        {
            "label": "Train PPO (quick)",
            "type": "shell",
            "command": "python training/train_ppo.py --total_timesteps 2000 --seed 0",
            "problemMatcher": []
        },
        {
            "label": "Check Isaac Import",
            "type": "shell",
            "command": "python scripts/check_isaac_import.py",
            "problemMatcher": []
        },
        {
            "label": "Isaac Precheck",
            "type": "shell",
            "command": "./scripts/isaac_precheck.sh",
            "problemMatcher": [
                {
                    "owner": "isaac-precheck",
                    "pattern": {
                        "regexp": "^\\{.*\\}$",
                        "file": 1,
                        "line": 1,
                        "message": 0
                    }
                }
            ]
        },
        {
            "label": "Env Diagnostic",
            "type": "shell",
            "command": "bash",
            "args": [
                "-lc",
                "scripts/roarm_env_diag.sh"
            ],
            "problemMatcher": [],
            "group": "none"
        },
        {
            "label": "View RoArm (USD)",
            "type": "shell",
            "command": "bash",
            "args": [
                "-lc",
                "scripts/run_isaac_tool.sh scripts/view_roarm.py --usd '${input:usdPath}' --prim '${input:primPath}' --steps 300"
            ],
            "problemMatcher": [],
            "group": "none"
        },
        {
            "label": "Scan RoArm USD",
            "type": "shell",
            "command": "bash",
            "args": [
                "-lc",
                "scripts/run_isaac_tool.sh scripts/view_roarm.py --usd '${input:usdPath}' --scan --headless"
            ],
            "problemMatcher": [],
            "group": "none"
        },
        {
            "label": "Apply Articulation Root",
            "type": "shell",
            "command": "bash",
            "args": [
                "-lc",
                "scripts/run_isaac_tool.sh scripts/apply_articulation_root.py --usd '${input:usdPath}' --prim '${input:primPath}'"
            ],
            "problemMatcher": [],
            "group": "none"
        },
        {
            "label": "Run MCP Isaac Server",
            "type": "shell",
            "command": "python mcp_servers/isaac_controller_server.py",
            "problemMatcher": []
        }
    ],
    "inputs": [
        {
            "id": "usdPath",
            "type": "promptString",
            "description": "Path to robot USD file",
            "default": "${workspaceFolder}/assets/roarm_m3/usd/roarm_m3.usd"
        },
        {
            "id": "primPath",
            "type": "promptString",
            "description": "Root prim path for articulation (see 'Scan RoArm USD')",
            "default": "/World/roarm_m3"
        }
    ]
}